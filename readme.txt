######################################################################
# Follow Up Mailing List Processor                                   #
# Version 5.1                                                        #
# Last modified 24.03.2012                                           #
######################################################################

Please read this document completely before proceeding with installation.

ChangeLog:
5.1 - March 2012
Changes/Bug fixes:
    - Link tracking now adds only link without prefix: MESS_PERS_REDIR_LINK.
    - Xinha error patch: removing %5B and %5D strings generated by Xinha from time to time.
    - Added missing language items: LNG_SIGNATURE_CLONE_DESCR and LNG_SIGNATURE_EDIT_DESCR, TO_UNSUBSCRIBE_CLICK_LINK_BELOW
    - Link tracking cuts long links. FIXED (changed redirect_link varchar(200) -> TEXT)
    - When loading external content with error – content url was shown. Now it is hidden.
    - Extended DOI time from 2 to 7 days.
    - Updated version number: 5.1.
    - Enabled null value in the field conf_value of swd_conf table.
    - Enabled null value in the field mess of swd_mess table.
    - Sending form additional fields values in "email to administrator" of each account.

New functions:
    - HTML Form->Subscribe/unsubscribe settings
        - Added “Select accounts where you automatically want to SUSPEND prospects when they subscribe to this account.” Suspend works the same as clicking Deactivate on the subscriber email on the selected account. (Subscriber won’t receive next messages – but all the links in messages he had received before are still accessible.)
        - Added “Select accounts where you automatically want to LOCK prospects when they subscribe to this account.” Lock works the same as clicking Deactivate on the subscriber email on the selected account and changing its unsubscribe string. (Subscriber won’t receive next messages – all the links in messages he had received before stays inaccessible.)
    - Added: Keeping attachments when coping messages.
    - Edit message: 
        - Added: Copy HTML content to text message.
        - Added: ID for each attachment (enables referencing image attachments by cid:filename – and using it in the HTML message content)
    - Added logo on the login page.

5.10.03b - March 2011
Removed license checks in conf.cgi

5.10.03a - July 2010
- Cleaned up on July 19, 2010 the following files by J McCaul: Install.cgi and shabl/install.html
- Coordinated the functions between install.cgi and shabl/install.html so that individuals can access the database from the install process - individual may need to first create a basic (empty) database allowing full access privileges prior to the db installation process.
- Fixed the numbering of the steps. 
- Removed the hidden "licence" remnants in the install.shtml since that is no longer needed in order to complete the process. 

5.10.03 - June 2009
- Implemented fix for MySQL 5.0.42 and later (silently changes the behavior of comparing a DATE column to NOW(). Effected files are "broadcaster" and "func.cgi".

------------------------------------------
INSTALLATION INSTRUCTIONS - READ CAREFULLY
------------------------------------------

STEP 1
Upload all the files contained in this archive (retaining the directory structure) to the /cgi-bin/ directory on your server or hosting account.

Tip: Suggest to create a new subdirectory in your /cgi-bin/
For example /cgi-bin/fump/

All files (except images located in /shabl/img folder) should be uploaded in ASCII mode. If you are unfamiliar with what this means please refer to your FTP client documentation.


STEP 2
Set the permissions of the following files to CHMOD '755':
  broadcaster
  sender
  content.cgi
  bounce.cgi
  conf.cgi
  func.cgi
  logpng.cgi
  pref.cgi
  r.cgi
  register.cgi
  responder.cgi
  rss.cgi
  starter.cgi
  update.cgi
  install.cgi

 
CHMOD '666' to the file 'broadcast.log' - FUMP will write broadcaster logs there if you will check option "Save broadcast logs" in the "Statistics" - "Current broadcast log".

CHMOD 777 to directory 'backup' - FUMP will store database backups there.

All other files will have permission CHMOD '644', exept 'cnf.rd'.

NOTE: While installing file 'cnf.rd' must have '666' permission after it you can change permission to '644'

If you do not want to use cron jobs to start the broadcast process, you can remove your 'cron' directory from installation.


STEP 3
Once all the files have been uploaded and permissions set you should point your browser to the install.cgi file. For example if your domain name is www.yourdomain.com and you placed Follow Up Mailing List Processor in a directory http://www.yourdomain.com/cgi-bin/fump/ you would enter http://www.yourdomain.com/cgi-bin/fump/install.cgi into your browser. When you have done this you should see the installation screen appear.

Before proceeding with installation you should ensure you have an empty database available. Ask your provider for details if you are unsure whether you do or not.

Once you have reached the installation page you need to complete 3 steps.

--1: Database connection
If you do not have or do not know the database server, database name, database username, database password, please check with your hosting provider. The database server is typically localhost but this is not universal. The database prefix allows you to enter a few characters, short name, etc. which all tables used by this installation will be prefixed with. The default (swd_) will usually be fine. However if you have more than one copy of Follow Up Mailing List Processor using the same database be sure to alter it or you will receive errors during installation.

NOTE: If you receiving error like: "Can not write to cnf.rd file: permission denied", please set '666' permissions to it. 

--2: Database installation.
The FUMP installer will check existing tables on your database. If tables with same prefix are exists, you can skip database installation. If you are updating FUMP please look at update.txt file for instructions.
---------------------------------------------------------------------------------------------
!ATTENTION: If you choose to install the database then all existing tables will be dropped. !
---------------------------------------------------------------------------------------------

--3: Password to access to administration page. You will need to choose a password for the initial administration account. You will be able to change a password for the initial administration account. You will be able to change it later.

The installation process will now create and populate all the necessary tables.

=====================
AFTER INSTALLATION YOU MUST REMOVE: "install.cgi" and "update.cgi" files from the FUMP folder on your server.

Please backup and change permissions to '644' to your 'cnf.rd' file.
=====================

STEP 4
Now you MUST set up the activation link.  

You place a 1-pixel "image" on a well viewed web page, which activates the FUMP periodically. If there even one visitor a day it will work fine.

When activated, it checks the POP3 email accounts you specified and sees if it needs to send a confirmation e-mail to your contacts and adds them to your mailing list.

The syntax of the activation "image" follows:

<img src="http://www.mydomain.com/cgi-bin/fump/starter.cgi" border="0">

You can even place the activation image on another domain. It will activate the FUMP everytime somebody visits that page. However, in my experience, best is to place it on the entry page to your site. 

Alternative method is to set up processing via a CRON:
You already have the 'startercron' file in the 'cron' folder. Edit it as follows: put the absolute path to your FUMP directory like this: */25 * * * * perl /home/user/domain-www/cgi-bin/fump/cron/startercron 

This will run a cron every 25 minutes.


STEP 5
Now login to the admin area using the password you specified during installation. To run the admin area, just point your browser to the responder.cgi file like this: http://www.mydomain.com/cgi-bin/fump/responder.cgi

After you are logged in please go to "GLOBAL SETTINGS" and complete the information.

   - Personal: Here you can set your admin email and admin name.

   - SMTP/sendmail: Here you should specify your server's mailing program

   - Access: Here you can change your password

   - Time Synchronization: Change time depending on your time zone

Once you have completed the installation, you need to delete the install.cgi and update.cgi from your server. Leaving them is a serious potential security issue! A notice will be present in the admin interface as long as these files are still present.

STEP 6
Online HTML editor installation: 
Upload 'xinha' directory to your server ROOT folder.
     - The editor URL must be like http://www.yourhost.com/xinha/ (do not change the folder name).